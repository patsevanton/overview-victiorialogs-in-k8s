### Фильтр по времени

VictoriaLogs сканирует **все** логи для каждого запроса, если в нём отсутствует фильтр по полю ``_time``.

Для ускорения запросов с полным сканированием (без фильтра `_time`) система использует различные оптимизации. Однако такие запросы могут выполняться медленно, если в хранилище содержится большое количество логов за длительный промежуток времени.

Самый простой способ оптимизировать запросы — сузить область поиска с помощью фильтра по полю ``_time``.

Например, следующий запрос вернёт логи, поступившие в VictoriaLogs за последний час и содержащие слово `error` в поле ``_msg``:

```logsql
_time:1h AND error
```

## Поддерживаемые форматы фильтра `_time`

- `_time:duration` — выбирает логи с временными метками в диапазоне `(сейчас − duration, сейчас]`, где `duration` может принимать `следующие значения`. Примеры:
  - `_time:5m` — логи за последние 5 минут;
  - `_time:2.5d15m42.345s` — логи за последние 2,5 дня, 15 минут и 42,345 секунды;
  - `_time:1y` — логи за последний год.
- `_time:>duration` — логи с временными метками старше, чем `сейчас − duration`.
- `_time:YYYY-MM-DDZ` — все логи за конкретный день по UTC. Например, `_time:2023-04-25Z` — логи за 25 апреля 2023 года по UTC.
- `_time:YYYY-MMZ` — все логи за конкретный месяц по UTC. Например, `_time:2023-02Z` — логи за февраль 2023 года по UTC.
- `_time:YYYYZ` — все логи за конкретный год по UTC. Например, `_time:2023Z` — логи за 2023 год по UTC.
- `_time:YYYY-MM-DDTHHZ` — все логи за конкретный час по UTC. Например, `_time:2023-04-25T22Z` — логи за 22-й час 25 апреля 2023 года по UTC.
- `_time:YYYY-MM-DDTHH:MMZ` — все логи за конкретную минуту по UTC. Например, `_time:2023-04-25T22:45Z` — логи за 22:45 25 апреля 2023 года по UTC.
- `_time:YYYY-MM-DDTHH:MM:SSZ` — все логи за конкретную секунду по UTC. Например, `_time:2023-04-25T22:45:59Z` — логи за 22:45:59 25 апреля 2023 года по UTC.
- `_time:>min_time` — логи с временными метками больше, чем `min_time`.
- `_time:>=min_time` — логи с временными метками больше или равны `min_time`.
- `_time:<max_time` — логи с временными метками меньше, чем `max_time`.
- `_time:<=max_time` — логи с временными метками меньше или равны `max_time`.
- `_time:[min_time, max_time]` — логи в диапазоне `[min_time, max_time]`, включая обе границы.  
  `min_time` и `max_time` могут быть в любом формате, указанном `здесь`.  
  Например, `_time:[2023-04-01Z, 2023-04-30Z]` — логи за весь апрель 2023 года по UTC (эквивалентно `_time:2023-04Z`).
- `_time:[min_time, max_time)` — логи в диапазоне `[min_time, max_time)`, не включая `max_time`.  
  Например, `_time:[2023-02-01Z, 2023-03-01Z)` — логи за весь февраль 2023 года по UTC (эквивалентно `_time:2023-02Z`).

## Указание часового пояса

Для всех форматов абсолютного времени можно указать смещение часового пояса, добавив суффикс `+hh:mm` или `-hh:mm`.

- `_time:2023-04-25+05:30` — логи за 25 апреля 2023 года по часовому поясу Индии (+05:30).
- `_time:2023-02-07:00` — логи за февраль 2023 года по часовому поясу Калифорнии (−07:00).

Если смещение часового пояса не указано, используется локальный часовой пояс хоста, на котором работает VictoriaLogs.  
Например, `_time:2023-10-20` — логи за 20 октября 2023 года по локальному времени хоста.

## Смещение диапазона времени

Можно указать общее смещение для выбранного диапазона времени, добавив `offset` после фильтра `_time`. Примеры:

- `_time:offset 1h` — логи до `сейчас − 1ч`.
- `_time:5m offset 1h` — логи в диапазоне `(сейчас − 1ч 5м, сейчас − 1ч]`.
- `_time:2023-07Z offset 5h30m` — логи за июль 2023 года по UTC со смещением +5ч 30м.
- `_time:`2023-02-01Z, 2023-03-01Z) offset 1w` — логи за неделю до диапазона `[2023-02-01Z, 2023-03-01Z)` по UTC.

## Советы по производительности

- Рекомендуется указывать **наименьший возможный** диапазон времени при поиске — это сокращает объём логов, которые нужно просканировать.  
  Например, `_time:1h` обычно выполняется быстрее, чем `_time:5h`.
- Хотя LogsQL поддерживает произвольное количество фильтров `_time:...` на любом уровне [логических фильтров`, рекомендуется указывать **один** фильтр `_time` на верхнем уровне запроса.
