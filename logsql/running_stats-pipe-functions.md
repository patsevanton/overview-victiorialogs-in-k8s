## Функции `running_stats` для конвейера (pipe)

LogsQL поддерживает следующие функции для конвейера ``running_stats``:

- ``count`` — возвращает количество записей в логах.
- ``max`` — возвращает максимальное значение по указанным `полям логов`.
- ``min`` — возвращает минимальное значение по указанным `полям логов`.
- ``sum`` — возвращает сумму числовых значений по указанным `полям логов`.

### count в `running_stats`

Функция `count()` в конвейере ``running_stats`` вычисляет текущее (нарастающее) количество выбранных записей в логах.

**Пример:** следующий запрос добавляет поле `running_logs` к выбранным записям за последние 5 минут:

```logsql
_time:5m | running_stats count() running_logs
```

Можно подсчитать количество записей с непустыми значениями в определённом `поле лога`, используя синтаксис `count(fieldName)`.

**Пример:** запрос возвращает текущее количество записей с заполненным полем `username` за последние 5 минут:

```logsql
_time:5m | running_stats count(username) running_logs_with_username
```

Если внутри `count()` перечислить несколько полей, будет подсчитано количество записей, у которых **хотя бы одно** из перечисленных полей не пустое.

**Пример:** запрос возвращает количество записей с непустым полем `username` **или** `password` за последние 5 минут:

```logsql
_time:5m | running_stats count(username, password) running_logs_with_username_or_password
```

Можно подсчитать количество записей с хотя бы одним непустым полем, имеющим общий префикс, с помощью синтаксиса `count(prefix*)`.

**Пример:** запрос возвращает количество записей с хотя бы одним непустым полем с префиксом `foo` за последние 5 минут:

```logsql
_time:5m | running_stats count(foo*)
```

### max в `running_stats`

Функция `max(field1, ..., fieldN)` в конвейере ``running_stats`` возвращает текущее (нарастающее) максимальное значение среди всех указанных `полей логов`.

**Пример:** запрос возвращает текущее максимальное значение поля `duration` за последние 5 минут:

```logsql
_time:5m | running_stats max(duration) running_max_duration
```

Можно вычислить текущее максимальное значение среди всех полей с общим префиксом, используя синтаксис `max(prefix*)`.

### min в `running_stats`

Функция `min(field1, ..., fieldN)` в конвейере ``running_stats`` возвращает текущее (нарастающее) минимальное значение среди всех указанных `полей логов`.

**Пример:** запрос возвращает текущее минимальное значение поля `duration` за последние 5 минут:

```logsql
_time:5m | running_stats min(duration) running_min_duration
```

Можно найти текущее минимальное значение среди всех полей с общим префиксом, используя синтаксис `min(prefix*)`.

### sum в `running_stats`

Функция `sum(field1, ..., fieldN)` в конвейере ``running_stats`` вычисляет текущую (нарастающую) сумму числовых значений среди всех указанных `полей логов`.

Нечисловые значения игнорируются. Если все значения в полях `field1`, ..., `fieldN` нечисловые, возвращается `NaN`.

**Пример:** запрос возвращает текущую сумму числовых значений поля `duration` за последние 5 минут:

```logsql
_time:5m | running_stats sum(duration) running_sum_duration
```

Можно найти текущую сумму для всех полей с общим префиксом, используя синтаксис `sum(prefix*)`.
