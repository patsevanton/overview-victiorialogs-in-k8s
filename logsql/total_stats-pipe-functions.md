## Функции `total_stats` в пайпе

В LogsQL поддерживаются следующие функции для пайпа ``total_stats``:

- ``count`` — возвращает количество записей в логах;
- ``max`` —возвращает максимальное значение по указанным `полям логов`;
- ``min`` —возвращает минимальное значение по указанным `полям логов`;
- ``sum`` —возвращает сумму по указанным числовым `полям логов`.

### count в total_stats

Функция `count()` в пайпе ``total_stats`` вычисляет общее количество выбранных записей в логах.

Например, следующий запрос добавляет поле `total_logs` к выбранным записям за последние 5 минут:

```logsql
_time:5m | total_stats count() total_logs
```

Можно подсчитать количество записей с непустыми значениями для определённого `поля лога`, используя синтаксис `count(fieldName)`. Например, следующий запрос возвращает общее количество записей с заполненным полем `username` за последние 5 минут:

```logsql
_time:5m | total_stats count(username) total_logs_with_username
```

Если внутри `count()` перечислено несколько полей, то подсчитывается количество записей, в которых хотя бы одно из указанных полей непустое. Например, следующий запрос возвращает количество записей с непустым полем `username` **или** `password` за последние 5 минут:

```logsql
_time:5m | total_stats count(username, password) total_logs_with_username_or_password
```

Также можно подсчитать количество записей, содержащих хотя бы одно непустое поле с общим префиксом, используя синтаксис `count(prefix*)`. Например, следующий запрос возвращает количество записей, в которых есть хотя бы одно непустое поле с префиксом `foo`, за последние 5 минут:

```logsql
_time:5m | total_stats count(foo*)
```

### max в total_stats

Функция `max(field1, ..., fieldN)` в пайпе ``total_stats`` возвращает общее максимальное значение среди всех указанных `полей логов`.

Например, следующий запрос возвращает максимальное значение поля `duration` за записи логов за последние 5 минут:

```logsql
_time:5m | total_stats max(duration) total_max_duration
```

Можно вычислить общее максимальное значение для всех полей с общим префиксом с помощью синтаксиса `max(prefix*)`.

### min в total_stats

Функция `min(field1, ..., fieldN)` в пайпе ``total_stats`` возвращает общее минимальное значение среди всех указанных `полей логов`.

Например, следующий запрос возвращает минимальное значение поля `duration` для записей логов за последние 5 минут:

```logsql
_time:5m | total_stats min(duration) total_min_duration
```

Можно найти общее минимальное значение для всех полей с общим префиксом с помощью синтаксиса `min(prefix*)`.


### sum в total_stats

Функция `sum(field1, ..., fieldN)` в пайпе ``total_stats`` вычисляет общую сумму числовых значений по всем указанным `полям логов`. Нечисловые значения пропускаются. Если все значения в полях `field1`, ..., `fieldN` нечисловые, возвращается `NaN`.

Например, следующий запрос возвращает общую сумму числовых значений поля `duration` по записям логов за последние 5 минут:

```logsql
_time:5m | total_stats sum(duration) total_sum_duration
```

Можно найти общую сумму для всех полей с общим префиксом с помощью синтаксиса `sum(prefix*)`.
