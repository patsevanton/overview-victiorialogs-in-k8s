### статистика гистограмм

Функция конвейера статистики `histogram(field)` (см. `stats pipe function`) возвращает `бакеты гистограммы VictoriaMetrics`
для заданного ``field``.

Например, следующий запрос возвращает бакеты гистограммы для поля `response_size`, сгруппированные по полю `host`, по логам за последние 5 минут:

```logsql
_time:5m | stats by (host) histogram(response_size)
```

Если поле содержит `значение длительности`, то `histogram` нормализует его к наносекундам. Например, `1.25ms` будет нормализовано до `1_250_000`.

Если поле содержит `короткое числовое значение`, то `histogram` нормализует его к числовому значению без каких-либо суффиксов. Например, `1KiB` будет преобразовано в `1024`.

Бакеты гистограммы возвращаются в виде следующего JSON-массива:

```json
[{"vmrange":"...","hits":...},...,{"vmrange":"...","hits":...}]
```

Каждое значение `vmrange` содержит диапазон значений соответствующего `бакета гистограммы VictoriaMetrics`,
а `hits` содержит количество значений, попавших в данный бакет.

Иногда бывает удобно «развернуть» возвращаемые бакеты гистограммы для дальнейшей обработки прямо в запросе. Например, следующий запрос
строит гистограмму по `полю` `response_size`,
а затем разворачивает её в отдельные строки с полями `vmrange` и `hits` с помощью конвейеров
``unroll`` и
``unpack_json``:

```logsql
_time:5m
  | stats histogram(response_size) as buckets
  | unroll (buckets)
  | unpack_json from buckets
```
