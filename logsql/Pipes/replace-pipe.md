### Замена подстроки (pipe `replace`)

Конструкция `<q> | replace ("старая", "новая") at поле` `pipe` заменяет все вхождения подстроки `старая` на подстроку `новая` в указанном ``поле`` для всех логов, возвращённых запросом `<q>` `query`.

**Пример:** следующий запрос заменяет все подстроки `secret-password` на `***` в ``поле _msg`` для логов за последние 5 минут:

```logsql
_time:5m | replace ("secret-password", "***") at _msg
```

Часть `at _msg` можно опустить, если замена выполняется в ``поле _msg``. Следующий запрос эквивалентен предыдущему:

```logsql
_time:5m | replace ("secret-password", "***")
```

Количество замен можно ограничить с помощью `limit N` в конце конструкции `replace`. Например, следующий запрос заменит только первое вхождение подстроки `foo` на `bar` в `поле лога` `baz`:

```logsql
_time:5m | replace ('foo', 'bar') at baz limit 1
```


#### Условная замена

Если `pipe `replace`` должен применяться только к некоторым `записям логов`, добавьте `if (<фильтры>)` после `replace`.  
В `<фильтры>` могут содержаться произвольные `фильтры`. Например, следующий запрос заменяет `secret` на `***` в поле `password` **только** если поле `user_type` равно `admin`:

```logsql
_time:5m | replace if (user_type:=admin) ("secret", "***") at password
```
