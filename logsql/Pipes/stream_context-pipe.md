### Конвейер `stream_context`

Конвейер `| stream_context ...` в выражении `<q> | stream_context ...` позволяет выбирать окружающие записи логов в рамках одного `потока логов` среди логов, возвращённых `запросом` `<q>`, аналогично `grep -A` / `grep -B`.

Возвращаемые фрагменты логов разделяются сообщением `---` (см. поле `log message`) для более удобного анализа.

Например, следующий запрос возвращает до 10 дополнительных логов **после** каждого сообщения, содержащего `слово` `panic`, среди всех логов за последние 5 минут:

```logsql
_time:5m panic | stream_context after 10
```

Следующий запрос возвращает до 5 дополнительных логов **перед** каждым сообщением, содержащим слово `stacktrace`, среди всех логов за последние 5 минут:

```logsql
_time:5m stacktrace | stream_context before 5
```

Следующий запрос возвращает до 2 логов **перед** сообщением, содержащим слово `error`, и до 5 логов **после** этого сообщения среди всех логов за последние 5 минут:

```logsql
_time:5m error | stream_context before 2 after 5
```

По умолчанию конвейер `stream_context` ищет окружающие логи в окне длительностью один час. Это окно можно изменить во время выполнения запроса с помощью опции `time_window`.
Например, следующий запрос ищет окружающие логи в окне длительностью одну неделю:

```logsql
_time:5m error | stream_context before 10 time_window 1w
```

Конвейер `| stream_context` должен располагаться первым — сразу после `фильтров`.
